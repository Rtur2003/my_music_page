/* ===============================================
   IMAGE OPTIMIZATION & PERFORMANCE
   WebP support, responsive images, lazy loading
   =============================================== */

/* Progressive image loading */
.hero-profile-img {
    /* Start with a low-quality placeholder */
    background: linear-gradient(135deg, rgba(212, 176, 120, 0.1), rgba(212, 176, 120, 0.05));
    transition: opacity 0.3s ease;
}

.hero-profile-img[src*=".webp"] {
    opacity: 1;
}

/* WebP fallback with progressive enhancement */
.modern-webp-image {
    background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns%3D%22http%3A//www.w3.org/2000/svg%22 width%3D%22200%22 height%3D%22200%22 viewBox%3D%220 0 200 200%22%3E%3Crect width%3D%22200%22 height%3D%22200%22 fill%3D%22%23d4b078%22 opacity%3D%220.1%22/%3E%3C/svg%3E');
    background-size: cover;
    background-position: center;
}

/* Responsive image sizing */
@media (max-width: 480px) {
    .hero-profile-img {
        width: 120px !important;
        height: 120px !important;
        max-width: 120px !important;
        max-height: 120px !important;
    }

    .artwork-image {
        width: 100px !important;
        height: 100px !important;
        max-width: 100px !important;
        max-height: 100px !important;
    }
}

@media (min-width: 481px) and (max-width: 768px) {
    .hero-profile-img {
        width: 150px !important;
        height: 150px !important;
        max-width: 150px !important;
        max-height: 150px !important;
    }

    .artwork-image {
        width: 120px !important;
        height: 120px !important;
        max-width: 120px !important;
        max-height: 120px !important;
    }
}

@media (min-width: 769px) {
    .hero-profile-img {
        width: 200px !important;
        height: 200px !important;
        max-width: 200px !important;
        max-height: 200px !important;
    }

    .artwork-image {
        width: 150px !important;
        height: 150px !important;
        max-width: 150px !important;
        max-height: 150px !important;
    }
}

/* Optimize image rendering */
.hero-profile-img,
.artwork-image {
    image-rendering: optimizeSpeed;
    image-rendering: -webkit-optimize-contrast; /* Edge 79+ compatible */
    image-rendering: optimize-contrast;

    /* Prevent layout shift */
    contain: layout;

    /* Improve paint performance */
    will-change: auto;
    transform: translateZ(0);

    /* Force hardware acceleration */
    backface-visibility: hidden;
    perspective: 1000px;
}

/* Music artwork optimization - DO NOT override existing styles */
.music-artwork img {
    /* Only optimize rendering, don't change layout */
    image-rendering: optimizeSpeed;
}

/* Lazy loading placeholders */
.image-placeholder {
    background: linear-gradient(135deg, rgba(212, 176, 120, 0.1), rgba(212, 176, 120, 0.05));
    background-size: 400% 400%;
    animation: placeholderShimmer 1.5s ease-in-out infinite;
}

@keyframes placeholderShimmer {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

/* Critical image preloading hints */
.preload-critical {
    /* Browser hint for critical images */
    content: '';
}

/* Reduce image complexity on mobile */
@media (max-width: 768px) {
    .hero-profile-img,
    .artwork-image {
        /* Simplify shadows and effects on mobile */
        filter: none !important;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2) !important;
    }
}

/* Image loading states */
.image-loading {
    opacity: 0.7;
    filter: blur(2px);
    transition: all 0.3s ease;
}

.image-loaded {
    opacity: 1;
    filter: none;
}

/* Optimize background images */
.hero-section {
    background-size: cover;
    background-position: center;
    background-attachment: scroll; /* Better performance than fixed */
}

@media (max-width: 768px) {
    .hero-section {
        background-image: none !important; /* Remove heavy backgrounds on mobile */
        background: var(--primary-bg) !important;
    }
}

/* WebP support detection and fallback - Disabled for local development */
/* Note: WebP files need to be created when deploying to production */
.webp .hero-profile-img,
.no-webp .hero-profile-img {
    /* Use standard formats for local development */
    background-image: url('../images/hasan-arthur-profile.jpg');
}

.webp .artwork-image,
.no-webp .artwork-image {
    /* Use standard formats for local development */
    content: url('../images/logo-main.png');
}

/* Intersection Observer lazy loading enhancement */
.lazy-image {
    opacity: 0;
    transition: opacity 0.3s ease;
}

.lazy-image.loaded {
    opacity: 1;
}

/* Reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
    .hero-profile-img,
    .artwork-image,
    .image-placeholder {
        animation: none !important;
        transition: none !important;
    }
}

/* High DPI display optimization */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 2dppx) {
    .hero-profile-img {
        image-rendering: auto;
    }
}

/* Print optimization */
@media print {
    .hero-profile-img,
    .artwork-image {
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
    }
}