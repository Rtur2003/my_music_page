/* ===============================================
   LIGHTHOUSE PERFORMANCE FIXES
   Core Web Vitals optimizasyonu
   =============================================== */

/* Critical CSS - Above the fold */
.critical-content {
    contain: layout style paint;
    will-change: auto;
}

/* Image optimization for better LCP */
.hero-profile-img,
.artwork-image {
    content-visibility: auto;
    contain-intrinsic-size: 200px 200px;
    object-fit: cover;
    object-position: center;
    image-rendering: optimizeSpeed;

    /* WebP support */
    image-rendering: -webkit-optimize-contrast;
    image-rendering: optimize-contrast;
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
}

/* Preload critical images */
@media (max-width: 768px) {
    .hero-profile-img {
        max-width: 150px !important;
        max-height: 150px !important;
        width: 150px !important;
        height: 150px !important;
    }

    .artwork-image {
        max-width: 120px !important;
        max-height: 120px !important;
        width: 120px !important;
        height: 120px !important;
    }
}

/* Reduce layout shift */
.music-card,
.platform-link,
.social-link {
    contain: layout;
    aspect-ratio: var(--card-aspect-ratio, auto);
}

.music-artwork {
    aspect-ratio: 1;
    overflow: hidden;
}

.music-artwork img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* Font loading optimization */
@font-face {
    font-family: 'Inter';
    font-display: swap;
    src: local('Inter'), local('Inter-Regular');
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+0178, U+017D, U+017E, U+0192, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

/* Reduce non-composited animations */
@media (max-width: 768px) {
    * {
        animation-duration: 0.2s !important;
        transition-duration: 0.2s !important;
    }

    /* Disable expensive animations on mobile */
    .modern-player-card::before,
    .hero-section::before,
    .sonic-canvas::before,
    *[class*="shimmer"],
    *[class*="glow"],
    *[class*="pulse"] {
        animation: none !important;
        background: none !important;
        box-shadow: none !important;
    }

    /* Simplify hover effects - only compositable properties */
    .music-card:hover,
    .platform-link:hover,
    .social-link:hover,
    .link-card:hover {
        transform: none !important;
        transition: opacity 0.2s ease !important;
    }

    /* Disable all non-essential animations */
    .titleShimmer,
    .playButtonGlow,
    .artworkPulse,
    .playerGlow,
    .loadingProgress {
        animation: none !important;
    }

    /* Force GPU acceleration for remaining animations */
    .page-transition,
    .fade-in,
    .slide-up {
        transform: translateZ(0) !important;
        will-change: transform, opacity !important;
    }
}

/* Critical path CSS inlining simulation */
.above-fold {
    /* Hero, nav, critical content */
    contain: strict;
}

.below-fold {
    /* Everything else */
    content-visibility: auto;
    contain-intrinsic-size: 0 500px;
}

/* Reduce main thread work */
.intensive-element {
    will-change: transform;
    transform: translateZ(0);
}

/* Accessibility improvements for Lighthouse */
button:not([aria-label]):not([aria-labelledby]) {
    position: relative;
}

button:not([aria-label]):not([aria-labelledby])::after {
    content: attr(title);
    position: absolute;
    left: -9999px;
    opacity: 0;
}

/* Better contrast ratios */
.low-contrast-text {
    color: rgba(255, 255, 255, 0.9) !important;
}

.section-subtitle,
.music-card-artist {
    color: rgba(255, 255, 255, 0.85) !important;
}

/* Link accessibility */
a:not([aria-label]):not([aria-labelledby]) {
    position: relative;
}

a:not([aria-label]):not([aria-labelledby])::after {
    content: attr(title);
    position: absolute;
    left: -9999px;
    opacity: 0;
}

/* Form labels (if any) */
input:not([aria-label]):not([aria-labelledby]) {
    position: relative;
}

/* Reduce CLS - Cumulative Layout Shift */
.layout-stable {
    contain: layout;
    min-height: var(--min-height, auto);
}

/* Music card stability */
.music-card {
    min-height: 300px;
    contain: layout style;
}

.platform-link {
    min-width: 40px;
    min-height: 40px;
    contain: layout;
}

/* Loading optimization */
.lazy-load {
    content-visibility: auto;
    contain-intrinsic-size: 1px 300px;
}

/* PWA improvements */
@media (display-mode: standalone) {
    .pwa-optimized {
        padding-top: env(safe-area-inset-top);
        padding-bottom: env(safe-area-inset-bottom);
    }
}

/* Critical resource hints simulation in CSS */
.preload-hint {
    /* This would normally be in HTML */
    content: '';
}

/* Performance monitoring */
.perf-critical {
    /* Mark critical elements */
    contain: strict;
}

/* Reduce paint complexity */
@media (max-width: 768px) {
    .complex-background {
        background: var(--solid-bg) !important;
        backdrop-filter: none !important;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
    }
}

/* Bundle size hints */
.tree-shakeable {
    /* Use CSS custom properties for tree-shaking */
    display: var(--show, block);
}

/* Network optimization hints */
.critical-css {
    /* Above fold content */
    contain: none;
}

.non-critical-css {
    /* Below fold content */
    content-visibility: auto;
}

/* SEO improvements */
.seo-optimized {
    /* Structured data hints */
    contain: layout;
}

/* Better touch targets */
@media (max-width: 768px) {
    .touch-target {
        min-width: 44px;
        min-height: 44px;
        padding: 8px;
    }

    .platform-link,
    .social-link,
    button {
        min-width: 44px;
        min-height: 44px;
    }
}

/* Manifest hints for PWA */
.pwa-ready {
    /* PWA optimization */
    contain: layout;
}

/* Service worker hints */
.sw-cacheable {
    /* Cache strategy hints */
    contain: strict;
}

/* Core Web Vitals specific */
.fcp-optimized {
    /* First Contentful Paint */
    contain: layout style;
}

.lcp-optimized {
    /* Largest Contentful Paint */
    content-visibility: auto;
    contain-intrinsic-size: 1px 200px;
}

.fid-optimized {
    /* First Input Delay */
    contain: layout;
}

.cls-optimized {
    /* Cumulative Layout Shift */
    contain: layout;
    aspect-ratio: var(--aspect-ratio, auto);
}